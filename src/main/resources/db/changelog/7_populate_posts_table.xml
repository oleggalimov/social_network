<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.9.xsd">

    <changeSet id="7_1_populate_posts_table" author="oleg.galimov">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="posts"/>
        </preConditions>
        <sql>
            INSERT INTO USERS(user_id, password, second_name, first_name, age, city)
            VALUES ('9556a01c-ab60-4e63-b985-c728bbe31e02', gen_random_uuid(), 'Леди', 'Гага', 32, 'Воткинск');
        </sql>
        <sql>
            INSERT INTO posts (post_id, text,author_user_id,post_date_time)
            VALUES (gen_random_uuid(), 'Post_' || generate_series(1, 2000), '9556a01c-ab60-4e63-b985-c728bbe31e02',
            NOW() + (random() * (NOW()+'-2 days' - NOW())) + '-2 days');
        </sql>
    </changeSet>

</databaseChangeLog>